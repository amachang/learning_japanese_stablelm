# わかったこと/決めたこと

- 基本
  - [このモデルを使う](https://huggingface.co/stabilityai/japanese-stablelm-instruct-alpha-7b)
- とりあえず分かる範囲で必要なライブラリとか
  - torch
  - transformers
  - einops
  - sentencepiece
  - cuda
- バージョンとか。一旦以下のような環境を作ってみる
  - nvidia driver 535
  - cuda 11.8
  - python 3.10
  - torch 2.0.1
    - python 3.8 ~
    - cuda 11.7 or 11.8
  - transformers 4.31.0
    - torch 1.9 ~ ただし 1.12.0 はダメ
    - python 3.8 or 3.9 or 3.10
  - einops 0.6.1
    - python 3.7 ~
  - sentenncepiece 0.1.99
- 新しいものなので ChatGPT はこの作業の役には立たない
- ML の基礎知識的なこと
  - AutoModelForCausalLM ってどんなモデル
    - 文章の続きを書いたり、会話に回答したりする出力ヘッドを持つモデル。 CLM とか略すらしい
  - NIDIA/Megatron-LM という transformer ベースのモデルの学習を大規模高速化するための手法を使っている。 GPT-NeoX というのがその環境とかツールキットの名前
    - GPU を増やして、線形に FLOPS を増やすことが目的。完全に大規模むけ
    - StableLM は GPT-NeoX で学習され huggingface 用に変換されて公開されている
- ファイル群
  - fp16 用とそれ以外の weight がある
  - index.json でクラスの重みとして読む
  - クラスは transformer の PreTrainedModel を継承した JapaneseStableLMAlphaForCausalLM。 AutoModelForCausalMl は config.json を見てこれを使う
  - かなりシンプル

# わかってないこと/決まってないこと

- 関連ライブラリの version とかはどんな感じ？
- GCP でどのくらいのインスタンスが必要？
  - 使うのに正味どのくらいのお金かかる？
- いい感じの Web UI とかある？
- 架空や実在の人物の mimic と会話することってできるんですか？
  - 故人とか
  - 歴史上の人物とか
  - アイドルとか
  - 小説の中の人物とか
- いい感じの Web UI とかってすでに開発されてる？最悪 X 経由でアクセス可能な GUI でも良い。
- ネット小説とか学習させたら、その中のキャラになってくれるの？
- 追加学習の手法は？
  - few shot, one shot は?
  - dream booth 的な手法はどう？
  - every dream 的な手法はどう？
  - lora は？
- モデルシェアサイトはすでにある？
- chichipui 的な小説サイトは可能性あるの？人格を公開して遊ぶ感じ？ディストピア？
- decoder-only model って何？
  - encoder は他のモデルの使ってますってことですかね
- [requirements.txt](https://huggingface.co/stabilityai/japanese-stablelm-instruct-alpha-7b/blob/main/requirements.txt) には `sentencepiece` `einops` しか書いてないけど、 transformers とかはいらないのか？
  - 自分は huggingface リポジトリのことわかってないかもしれない

